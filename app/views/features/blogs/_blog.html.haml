- # app/views/features/blogs/_blog.html.haml

- presenter = present blog

= render :partial => 'admin/common/modals/confirm_delete'

%h2
  = presenter.label

  - if user_signed_in?
    = render :layout => 'common/components/button_bar', :locals => { :options => { :data => { :'backbone-layout' => 'Common.Actions', :'confirm-delete-body' => 'Are you sure you want to delete this blog?<br><br><strong>This will destroy all posts in this blog.</strong>'.html_safe } } } do
      = link_to new_blog_post_path(blog), :class => 'btn btn-sm btn-default' do
        %span.text-primary
          = icon :file_o
          Create Post
      = link_to index_blog_posts_path(blog), :class => 'btn btn-sm btn-default' do
        %span.text-info
          = icon :files_o
          View Posts
      = link_to edit_resource_path(blog), :class => 'btn btn-sm btn-default' do
        %span.text-warning
          = icon :files_o
          Edit Blog
      = link_to resource_path(blog), :class => 'btn btn-sm btn-default delete-link', :method => :delete do
        %span.text-danger
          = icon :trash, :scale => :large
          Delete Blog

- if post.nil?
  %p This blog does not currently have any posts to display.
- else
  = render :partial => 'features/blogs/navigation', :locals => { :blog => blog, :post => post }

  = render :partial => 'features/blog_posts/post', :locals => { :post => post }

  = render :partial => 'features/blogs/navigation', :locals => { :blog => blog, :post => post }

%p{ :style => 'margin-top:1em;' }
  = link_to directory_path(blog.directory) do
    = icon(:arrow_circle_left)
    Back to
    = DirectoryPresenter.new(blog.directory).label
