- # app/views/features/blog_posts/_post.html.haml

- presenter ||= present post

%h3
  = presenter.label

  - if user_signed_in?
    = render :layout => 'common/components/button_bar', :locals => { :options => { :data => { :'backbone-layout' => 'Common.Actions', :'confirm-delete-body' => 'Are you sure you want to delete this post?' } } } do
      - if presenter.published?
        = link_to unpublish_resource_path(post), :class => 'btn btn-sm btn-default', :method => :put do
          %span.text-warning
            = icon :reply
            Unpublish Post
      - else
        = link_to publish_resource_path(post), :class => 'btn btn-sm btn-default', :method => :put do
          %span.text-success
            = icon :share, :scale => :large
            Publish Post
      = link_to edit_resource_path(post), :class => 'btn btn-sm btn-default' do
        %span.text-warning
          = icon :files_o
          Edit Post
      = link_to resource_path(post), :class => 'btn btn-sm btn-default delete-link', :method => :delete do
        %span.text-danger
          = icon :trash, :scale => :large
          Delete Post

- if presenter.published? || current_user.blank?
  %p.text-muted= presenter.published_message
- else
  .alert.alert-warning.alert-dismissable
    %button.close{ :type => 'button', :'data-dismiss' => 'alert' }
      %span{ :'aria-hidden' => true } &times;
      %span.sr-only Close
    %strong Warning
    This post is not yet published. It is not visible to other users.

- present(post.content).render_content(self)
